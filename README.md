# netutils

Some useful utilities about network

## netmerge

用于合并/压缩网络号, 支持cidr格式和子网掩码格式, 错误的格式将被忽略

支持计算网络差集

Usage:

    php netmerge.php [[+|-]{net|host}] ...
    # net: 192.168.1.0/24 or 192.168.1.0/255.255.255.0 or 192.168.1.0,24 or 192.168.1.1/32
    # host: 192.168.1.1

Sample:

```bash
    php netmerge.php 0.0.0.0/1 128.0.0.0/1
    # 0.0.0.0/0

    php netmerge.php 0.0.0.0/0 -0.0.0.0/1
    # 128.0.0.0/1

    php netmerge.php 0.0.0.0/1 -0.0.0.0/2
    # 64.0.0.0/2

    php netmerge.php 0.0.0.0/1 -0.0.0.0/2 -64.0.0.0/2
    # (yes, nothing)

    php netmerge.php <<EOF
    0.0.0.0/2
    64.0.0.0/2
    128.0.0.0/2
    192.0.0.0/2
    EOF
    # 0.0.0.0/0

    php netmerge.php 192.168.0.0,16 192.168.1.0,24
    # 192.168.0.0/16

    php netmerge.php 192.168.0.0/255.255.0.0 192.168.1.0/255.255.255.0
    # 192.168.0.0/16

    php netmerge.php 192.168.1.0 192.168.1.1 192.168.1.2 192.168.1.3 192.168.1.4 192.168.1.5 192.168.1.6
    # 192.168.1.0/30
    # 192.168.1.4/31
    # 192.168.1.6/32

    php netmerge.php 0.0.0.0/0 -192.168.0.0/16 -172.16.0.0/12 -10.0.0.0/8 -169.254.0.0/16 -100.64.0.0/10 -127.0.0.0/8 -224.0.0.0/4 -0.0.0.0 -255.255.255.255
    # 0.0.0.1/32
    # 0.0.0.2/31
    # 0.0.0.4/30
    # 0.0.0.8/29
    # 0.0.0.16/28
    # 0.0.0.32/27
    # 0.0.0.64/26
    # 0.0.0.128/25
    # 0.0.1.0/24
    # 0.0.2.0/23
    # 0.0.4.0/22
    # 0.0.8.0/21
    # 0.0.16.0/20
    # 0.0.32.0/19
    # 0.0.64.0/18
    # 0.0.128.0/17
    # 0.1.0.0/16
    # 0.2.0.0/15
    # 0.4.0.0/14
    # 0.8.0.0/13
    # 0.16.0.0/12
    # 0.32.0.0/11
    # 0.64.0.0/10
    # 0.128.0.0/9
    # 1.0.0.0/8
    # 2.0.0.0/7
    # 4.0.0.0/6
    # 8.0.0.0/7
    # 11.0.0.0/8
    # 12.0.0.0/6
    # 16.0.0.0/4
    # 32.0.0.0/3
    # 64.0.0.0/3
    # 96.0.0.0/6
    # 100.0.0.0/10
    # 100.128.0.0/9
    # 101.0.0.0/8
    # 102.0.0.0/7
    # 104.0.0.0/5
    # 112.0.0.0/5
    # 120.0.0.0/6
    # 124.0.0.0/7
    # 126.0.0.0/8
    # 128.0.0.0/3
    # 160.0.0.0/5
    # 168.0.0.0/8
    # 169.0.0.0/9
    # 169.128.0.0/10
    # 169.192.0.0/11
    # 169.224.0.0/12
    # 169.240.0.0/13
    # 169.248.0.0/14
    # 169.252.0.0/15
    # 169.255.0.0/16
    # 170.0.0.0/7
    # 172.0.0.0/12
    # 172.32.0.0/11
    # 172.64.0.0/10
    # 172.128.0.0/9
    # 173.0.0.0/8
    # 174.0.0.0/7
    # 176.0.0.0/4
    # 192.0.0.0/9
    # 192.128.0.0/11
    # 192.160.0.0/13
    # 192.169.0.0/16
    # 192.170.0.0/15
    # 192.172.0.0/14
    # 192.176.0.0/12
    # 192.192.0.0/10
    # 193.0.0.0/8
    # 194.0.0.0/7
    # 196.0.0.0/6
    # 200.0.0.0/5
    # 208.0.0.0/4
    # 240.0.0.0/5
    # 248.0.0.0/6
    # 252.0.0.0/7
    # 254.0.0.0/8
    # 255.0.0.0/9
    # 255.128.0.0/10
    # 255.192.0.0/11
    # 255.224.0.0/12
    # 255.240.0.0/13
    # 255.248.0.0/14
    # 255.252.0.0/15
    # 255.254.0.0/16
    # 255.255.0.0/17
    # 255.255.128.0/18
    # 255.255.192.0/19
    # 255.255.224.0/20
    # 255.255.240.0/21
    # 255.255.248.0/22
    # 255.255.252.0/23
    # 255.255.254.0/24
    # 255.255.255.0/25
    # 255.255.255.128/26
    # 255.255.255.192/27
    # 255.255.255.224/28
    # 255.255.255.240/29
    # 255.255.255.248/30
    # 255.255.255.252/31
    # 255.255.255.254/32
```

### netmerge/netcal

根据ip开始地址和结束地址, 计算出区间跨越的所有网络

Usage:

```bash
    php netcal.php {ip_start} {ip_end}
```

Sample:

```bash
    php netcal.php 1.1.1.1 2.2.2.2
    # 1.1.1.1/32
    # 1.1.1.2/31
    # 1.1.1.4/30
    # 1.1.1.8/29
    # 1.1.1.16/28
    # 1.1.1.32/27
    # 1.1.1.64/26
    # 1.1.1.128/25
    # 1.1.2.0/23
    # 1.1.4.0/22
    # 1.1.8.0/21
    # 1.1.16.0/20
    # 1.1.32.0/19
    # 1.1.64.0/18
    # 1.1.128.0/17
    # 1.2.0.0/15
    # 1.4.0.0/14
    # 1.8.0.0/13
    # 1.16.0.0/12
    # 1.32.0.0/11
    # 1.64.0.0/10
    # 1.128.0.0/9
    # 2.0.0.0/15
    # 2.2.0.0/23
    # 2.2.2.0/31
    # 2.2.2.2/32

    php netcal.php 192.168.1.0 192.168.1.255
    # 192.168.1.0/24

    php netcal.php 192.168.1.5 192.168.1.254
    # 192.168.1.5/32
    # 192.168.1.6/31
    # 192.168.1.8/29
    # 192.168.1.16/28
    # 192.168.1.32/27
    # 192.168.1.64/26
    # 192.168.1.128/26
    # 192.168.1.192/27
    # 192.168.1.224/28
    # 192.168.1.240/29
    # 192.168.1.248/30
    # 192.168.1.252/31
    # 192.168.1.254/32
```
